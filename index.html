<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <title>XMind Embed Viewer</title>  
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  
    <style>  
        #file-list {  
            margin-bottom: 10px;  
        }  
    </style>  
</head>  
<body>  
    <div id="file-list" style="max-width: 1280px">  
        <h3>Current Files:</h3>  
        <ul id="file-list-items"></ul>  
        <button id="load-next-file">加载下一个文件</button>  
        <div id="mount"></div>  
    </div>  
    <script>  
        // 用于存储当前加载的文件索引  
        let currentFileIndex = 0;  
          
        // 遍历当前目录下的所有.xmind文件，并添加到文件列表中  
        function populateFileList() {  
            const fileListItems = $('#file-list-items');  
            const files = $.map($('input[type=file][multiple]')[0].files, function(file) {  
                return file.name;  
            });  
              
            $.each(files, function(index, fileName) {  
                fileListItems.append(`<li><a href="${fileName}">Load File ${index + 1}: ${fileName}</a></li>`);  
            });  
              
            // 假设xmind-embed-viewer-init函数用于初始化嵌入的xmind文件  
            // 这里我们只是模拟调用，你需要替换成实际的初始化函数  
            if (files.length > 0) {  
                loadXMindFile(files[0]);  
            }  
        }  
          
        // 加载指定的xmind文件  
        function loadXMindFile(fileName) {  
            // 这里应该是实际的加载xmind文件的代码，比如通过iframe或者API调用  
            console.log(`加载文件: ${fileName}`);  
            // 假设有一个显示文件的函数，你需要替换成实际的显示逻辑  
            displayXMindFile(fileName);  
              
            // 更新当前文件索引  
            currentFileIndex = files.indexOf(fileName) + 1;  
              
            // 如果还有更多文件，启用加载下一个文件的按钮  
            if (currentFileIndex < files.length) {  
                $('#load-next-file').prop('disabled', false);  
            } else {  
                $('#load-next-file').prop('disabled', true);  
            }  
        }  
          
        // 显示xmind文件的函数（需要你自己实现具体的显示逻辑）  
        function displayXMindFile(fileName) {  
            // 这里应该是具体的显示xmind文件的代码  
            console.log(`显示文件: ${fileName}`);  
            // 假设将文件名显示到某个元素中  
            $('#mount').text(`当前显示文件: ${fileName}`);  
        }  
          
        // 当页面加载完成后，初始化文件列表  
        $(document).ready(function() {  
            populateFileList();  
              
            // 给加载下一个文件的按钮添加点击事件处理函数  
            $('#load-next-file').on('click', function() {  
                const files = $('input[type=file][multiple]')[0].files;  
                if (currentFileIndex < files.length) {  
                    const nextFileName = files[currentFileIndex].name;  
                    loadXMindFile(nextFileName);  
                } else {  
                    alert('没有更多文件可以加载');  
                }  
            });  
        });  
    </script>  
      
    <!-- 这是一个隐藏的input元素，用于获取当前目录下的所有.xmind文件 -->  
    <input type="file" id="xmindFiles" name="xmindFiles[]" multiple webkitdirectory directory style="display:none;">  
      
    <script>  
        // 使用隐藏的input元素自动选择当前目录下的所有.xmind文件  
        $(document).ready(function() {  
            $('#xmindFiles').on('change', function() {  
                populateFileList();  
            });